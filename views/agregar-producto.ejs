<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nuevo Producto</title>
    <link rel="stylesheet" href="/css/NuevaPublicacion.css"> <!-- Vincula el archivo CSS externo -->
</head>
<body>
    <nav class="navbar">
        <a href="/index"><button class="button1">Volver al inicio</button></a>
        <a href="/conocenos"><img src="/images/logo.jpg" alt="Logo" class="logo"></a>
    </nav>

    <div class="container">
        <div>
            <h1>Formulario de Nuevo Producto</h1>
            <form id="FormularioP" method="POST" action="/agregar-producto"  enctype="multipart/form-data">
                <label for="nombre">Nombre del Producto:</label>
                <input type="text" id="nombre" name="nombre" required><br><br>
                <label for="precio">Precio:</label>
                <input type="number" id="precio" name="precio" min="0" value="0" step=".01" required><br><br>   
                <label for="cantidad">Cantidad:</label>
                <input type="number" id="cantidad" name="cantidad" min="1" value="1"  required><br><br>               
                <label for="categoria">Categoria:</label>
                <select id="categoria" name="categoria" required>
                    <option value = "1">Dibujo Técnico</option>
                    <option value = "2">Programación</option>
                    <option value = "3">Mecatrónica</option>
                    <option value = "4">Sistemas Digitales</option>
                </select><br><br>
                <label for="imagen">Imagen:</label>
                <input type="file" id="imagen" name="imagen" accept="image/*" required><br><br>
                <button type="submit">Enviar</button>
            </form>
        </div>
    </div>

    <!-- 
    <script>
    document.getElementById('FormularioP').addEventListener('submit', async function(event) {
    event.preventDefault();
    const formu = event.target;
    const formuDato = new FormData(formu);

    const precioInput = document.getElementById('precio');
    const precio = parseFloat(precioInput.value);

    const cantidadInput = document.getElementById('cantidad');
    const cantidad = int(cantidadInput.value); 

    if (cantidad <= 0){
            alert('La cantidad debe ser un número mayor que cero');
    }
    
    //Arreglar el tema de la validacion en la cantidad 
    // Que se identifique el metodo POST

    try {


        

        const responde = await fetch(formu.action, {
            method: formu.method,
            body: formuDato
        });

        const resultado = await responde.json();

        if (!resultado.success) {
            alert(resultado.message);
            if (resultado.redirect) {
                window.location.href = resultado.redirect; window.location.href = '/inicio';
            }
        } else {
            alert('Se mando correctamente la solicitud');
            window.location.href = '/inicio';
        }
    } catch (error) {
        console.error('Error:', error);
        alert('Formulario erroneo');
        window.location.href = '/inicio';   
    }
});

    </script> 
    -->  
</body>
</html>